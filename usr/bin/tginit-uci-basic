#!/bin/sh
# Copyright (c) 2020 TorGuard forum user 19807409
# requirement: opkg install iperf3 (apt install iperf3)
# iperf.wifx.net 5200 bis 5209, additional ports 1080, 8080, 3128, 1197, 1198, more info on https://speedtest.wtnet.de/
# iperf servers:    https://iperf.cc/
#                   https://iperf.fr/iperf-servers.php
rm -f /etc/config/torguard && touch /etc/config/torguard
uci add torguard serverlist
uci set torguard.@serverlist[-1].json='/etc/torguard/wireguard.json'
uci add torguard torguard
uci set torguard.@torguard[-1].ifname='wg'
uci set torguard.@torguard[-1].ifstartnr='0'
uci set torguard.@torguard[-1].zone='1'
uci rename torguard.@torguard[-1]='tg0'

uci add torguard credentials_tg0
uci set torguard.@credentials_tg0[-1].username=''
uci set torguard.@credentials_tg0[-1].password=''

uci add torguard interface_tg0
uci set torguard.@interface_tg0[-1].proto='wireguard'
uci set torguard.@interface_tg0[-1].private_key=''
uci set torguard.@interface_tg0[-1].listen_port='51820'
uci add_list torguard.@interface_tg0[-1].addresses=''
uci set torguard.@interface_tg0[-1].mtu='1420'
uci set torguard.@interface_tg0[-1].fwmark='0xFE'
uci set torguard.@interface_tg0[-1].delegate='0'
uci set torguard.@interface_tg0[-1].nohostroute='0'

uci add torguard wireguard_tg0
uci set torguard.@wireguard_tg0[-1].description='TorGuard - United States (New York)'
uci set torguard.@wireguard_tg0[-1].server_public_key=''
uci add_list torguard.@wireguard_tg0[-1].allowed_ips='0.0.0.0/0'
uci set torguard.@wireguard_tg0[-1].endpoint_host='173.244.200.119'
uci set torguard.@wireguard_tg0[-1].endpoint_port='1443'
uci set torguard.@wireguard_tg0[-1].vpn_dns0='10.9.0.1'
uci set torguard.@wireguard_tg0[-1].vpn_dns1='10.8.0.1'
uci set torguard.@wireguard_tg0[-1].persistent_keepalive='25'
uci set torguard.@wireguard_tg0[-1].route_allowed_ips='1'
uci set torguard.@wireguard_tg0[-1].tgprivkey=''
uci set torguard.@wireguard_tg0[-1].wgapipubkey=''
uci set torguard.@wireguard_tg0[-1].upgrade='0'
uci set torguard.@wireguard_tg0[-1].apifixtimeout='1'

uci add torguard specification
uci add_list torguard.@specification[-1].proto='udp'
uci rename torguard.@specification[-1]='spec_wireguard_proto'

uci add torguard specification 
uci add_list torguard.@specification[-1].port='1443'
uci rename torguard.@specification[-1]='spec_wireguard_ports'

uci add torguard specification
uci add_list torguard.@specification[-1].proto='udp'
uci add_list torguard.@specification[-1].proto='tcp'
uci rename torguard.@specification[-1]='spec_openvpn_proto'

uci add torguard specification
uci add_list torguard.@specification[-1].port='22'
uci add_list torguard.@specification[-1].port='53'
uci add_list torguard.@specification[-1].port='80'
uci add_list torguard.@specification[-1].port='389'
uci add_list torguard.@specification[-1].port='501'
uci add_list torguard.@specification[-1].port='443'
uci add_list torguard.@specification[-1].port='995'
uci add_list torguard.@specification[-1].port='1195'
uci add_list torguard.@specification[-1].port='1198'
uci add_list torguard.@specification[-1].port='1215'
uci add_list torguard.@specification[-1].port='1912'
uci add_list torguard.@specification[-1].port='4443'
uci add_list torguard.@specification[-1].port='9201'
uci rename torguard.@specification[-1]='spec_openvpn_ports'

uci add torguard specification
uci add_list torguard.@specification[-1].cipher='aes-128-gcm'
uci rename torguard.@specification[-1]='spec_openvpn_cipher'

uci add torguard specification
uci add_list torguard.@specification[-1].auth='sha1'
uci add_list torguard.@specification[-1].auth='sha256'
uci add_list torguard.@specification[-1].auth='sha512'
uci rename torguard.@specification[-1]='spec_openvpn_auth'

uci add torguard specification
uci add_list torguard.@specification[-1].proto='tcp'
uci add_list torguard.@specification[-1].proto='udp'
uci add_list torguard.@specification[-1].port='443'
uci rename torguard.@specification[-1]='spec_oc'

uci add torguard specification
uci set torguard.@specification[-1].name='TorGuard Public DNS - USA'
uci add_list torguard.@specification[-1].dns='104.223.91.194,104.223.91.210'
uci rename torguard.@specification[-1]='spec_dns_us1'

uci add torguard specification
uci set torguard.@specification[-1].name='Cloudflare'
uci add_list torguard.@specification[-1].dns='1.1.1.1,1.0.0.1'
uci rename torguard.@specification[-1]='spec_dns_cloudflare'

uci add torguard specification
uci set torguard.@specification[-1].name='Google'
uci add_list torguard.@specification[-1].dns='8.8.8.8,8.8.4.4'
uci rename torguard.@specification[-1]='spec_dns_google'

uci add torguard specification
uci set torguard.@specification[-1].name='Level3'
uci add_list torguard.@specification[-1].dns='4.2.2.2,4.2.2.3'
uci rename torguard.@specification[-1]='spec_dns_opendns'

uci add torguard specification
uci set torguard.@specification[-1].name='OpenDNS'
uci add_list torguard.@specification[-1].dns='208.67.222.222,208.67.220.220'
uci rename torguard.@specification[-1]='spec_dns_opendns'

uci add torguard specification
uci set torguard.@specification[-1].name='Quad9'
uci add_list torguard.@specification[-1].dns='9.9.9.9'
uci rename torguard.@specification[-1]='spec_dns_quad9'

uci add torguard specification
uci add_list torguard.@specification[-1].hostname='proxy.torguard.org'
uci add_list torguard.@specification[-1].hostname='proxy.torguard.io'
uci add_list torguard.@specification[-1].hostname='proxy.secureconnect.me'
uci rename torguard.@specification[-1]='spec_proxy_hostnames'

uci add torguard specification
uci add_list torguard.@specification[-1].port='1080'
uci add_list torguard.@specification[-1].port='1085'
uci add_list torguard.@specification[-1].port='1090'
uci rename torguard.@specification[-1]='spec_socks5'

uci add torguard specification
uci add_list torguard.@specification[-1].port='6060'
uci add_list torguard.@specification[-1].port='1337'
uci add_list torguard.@specification[-1].port='1338'
uci add_list torguard.@specification[-1].port='1339'
uci add_list torguard.@specification[-1].port='1340'
uci add_list torguard.@specification[-1].port='1341'
uci add_list torguard.@specification[-1].port='1342'
uci add_list torguard.@specification[-1].port='1343'
uci rename torguard.@specification[-1]='spec_proxy_http'

uci add torguard specification
uci add_list torguard.@specification[-1].port='23'
uci add_list torguard.@specification[-1].port='592'
uci add_list torguard.@specification[-1].port='778'
uci add_list torguard.@specification[-1].port='489'
uci add_list torguard.@specification[-1].port='282'
uci add_list torguard.@specification[-1].port='993'
uci add_list torguard.@specification[-1].port='465'
uci add_list torguard.@specification[-1].port='7070'
uci rename torguard.@specification[-1]='spec_proxy_ssl'

uci commit torguard
